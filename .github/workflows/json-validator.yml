# .github/workflows/json‚Äëvalidator.yml
name: Validate JSON on change

# 1Ô∏è‚É£  Trigger only when *.json files are touched
on:
  push:
    branches: [main]          # or whatever branches you care about
    paths:                    # glob patterns
      - '**/*.json'
  pull_request:
    paths:
      - '**/*.json'

jobs:
  validate:
    runs-on: ubuntu-latest

    steps:
    # 2Ô∏è‚É£  Get the repo @ the commit being tested
    - uses: actions/checkout@v4

     # 2Ô∏è‚É£  Install the Python version you need
    - uses: actions/setup-python@v5
      with:
        python-version: '3.11'    # pin any version you like

    # 4Ô∏è‚É£  Grab only the files that changed in this commit/PR
    - id: changed
      uses: tj-actions/changed-files@v41       # tiny, zero‚Äëconfig helper
      with:
        files: '**/*.json'

    # 5Ô∏è‚É£  Run your script on each file
    - name: Run validator
      if: steps.changed.outputs.any_changed == 'true'
      run: |
        for file in ${{ steps.changed.outputs.all_changed_files }}; do
          echo "üîç validating $file"
          python validate.py "$file"
        done
